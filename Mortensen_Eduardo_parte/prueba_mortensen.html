<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Biblioteca Digital</title>
</head>
<body>
  <h1>Gestión de Biblioteca Digital</h1>
  
  <h2>Buscar Libros</h2>
  <form id="busquedaForm" onsubmit="buscarLibros(event)">
    <label for="tituloInput">Título:</label>
    <input type="text" id="tituloInput" placeholder="Buscar por título">

    <label for="autorInput">Autor:</label>
    <input type="text" id="autorInput" placeholder="Buscar por autor">

    <label for="generoInput">Género:</label>
    <input type="text" id="generoInput" placeholder="Buscar por género">

    <button type="submit">Buscar</button>
  </form>

  <h2>Libros Disponibles</h2>
  <ul id="librosLista"></ul>

  <h2>Libros Prestados</h2>
  <ul id="prestadosLista"></ul>

  <button onclick="mostrarPrestados()">Ver lista de libros prestados en la consola</button>

  <script>
    // Clase Libro
    class Libro {
      constructor(id, titulo, autor, genero, disponible = true) {
        this.id = id;
        this.titulo = titulo;
        this.autor = autor;
        this.genero = genero;
        this.disponible = disponible;
      }

      // Método para obtener información del libro
      get info() {
        return `${this.titulo} - ${this.autor} (${this.genero})`;
      }

      // Método para reservar un libro
      reservar() {
        if (!this.disponible) {
          alert("Este libro no está disponible.");
          return false;
        }
        this.disponible = false;
        return true;
      }

      // Método para devolver un libro
      devolver() {
        this.disponible = true;
      }
    }

    // Clase Biblioteca
    class Biblioteca {
      constructor() {
        this.libros = [];
        this.prestados = [];
      }

      // Agregar libros a la biblioteca
      agregarLibro(libro) {
        this.libros.push(libro);
      }

      // Buscar libros con un filtro
      buscarLibros(filtro = {}) {
        const { titulo = "", autor = "", genero = "" } = filtro;
        return this.libros.filter(libro => 
          libro.disponible &&
          libro.titulo.toLowerCase().includes(titulo.toLowerCase()) &&
          libro.autor.toLowerCase().includes(autor.toLowerCase()) &&
          libro.genero.toLowerCase().includes(genero.toLowerCase())
        );
      }

      // Reservar un libro
      reservarLibro(id) {
        const libro = this.libros.find(libro => libro.id === id && libro.disponible);
        if (libro && libro.reservar()) {
          this.prestados.push(libro);
          return libro;
        }
        return null;
      }

      // Devolver un libro
      devolverLibro(id) {
        const index = this.prestados.findIndex(libro => libro.id === id);
        if (index !== -1) {
          const libro = this.prestados.splice(index, 1)[0];
          libro.devolver();
          return libro;
        }
        return null;
      }
    }

    // Crear instancia de la biblioteca
    const biblioteca = new Biblioteca();

    // Agregar libros a la biblioteca
    biblioteca.agregarLibro(new Libro(1, "El Quijote", "Cervantes", "Ficción"));
    biblioteca.agregarLibro(new Libro(2, "1984", "George Orwell", "Distopía"));
    biblioteca.agregarLibro(new Libro(3, "Cien Años de Soledad", "Gabriel García Márquez", "Realismo Mágico"));
    biblioteca.agregarLibro(new Libro(4, "El Principito", "Antoine de Saint-Exupéry", "Infantil"));

    // Renderizar listas de libros
    function renderizarLibros(filtro = {}) {
      const disponiblesLista = document.getElementById("librosLista");
      const prestadosLista = document.getElementById("prestadosLista");

      // Libros disponibles
      const librosDisponibles = biblioteca.buscarLibros(filtro);
      disponiblesLista.innerHTML = librosDisponibles.map(libro => `
        <li>
          ${libro.info}
          <button onclick="reservar(${libro.id})">Reservar</button>
        </li>
      `).join("");

      // Libros prestados
      prestadosLista.innerHTML = biblioteca.prestados.map(libro => `
        <li>
          ${libro.info}
          <button onclick="devolver(${libro.id})">Devolver</button>
        </li>
      `).join("");
    }

    // Función para reservar un libro
    function reservar(id) {
      const libro = biblioteca.reservarLibro(id);
      if (libro) {
        alert(`Has reservado el libro: "${libro.titulo}"`);
        renderizarLibros();
      }
    }

    // Función para devolver un libro
    function devolver(id) {
      const libro = biblioteca.devolverLibro(id);
      if (libro) {
        alert(`Has devuelto el libro: "${libro.titulo}"`);
        renderizarLibros();
      }
    }

    // Función para manejar la búsqueda
    function buscarLibros(event) {
      event.preventDefault();
      const titulo = document.getElementById("tituloInput").value;
      const autor = document.getElementById("autorInput").value;
      const genero = document.getElementById("generoInput").value;
      renderizarLibros({ titulo, autor, genero });
    }

    // Mostrar libros prestados en la consola
    function mostrarPrestados() {
      if (biblioteca.prestados.length === 0) {
        console.log("No hay libros prestados.");
        alert("No hay libros prestados.");
      } else {
        console.log("Lista de libros prestados:");
        biblioteca.prestados.forEach(libro => {
          console.log(`Título: ${libro.titulo}, Autor: ${libro.autor}, Género: ${libro.genero}`);
        });
        alert("La lista de libros prestados se ha mostrado en la consola.");
      }
    }

    // Inicializar la aplicación
    renderizarLibros();
  </script>
</body>
</html>


